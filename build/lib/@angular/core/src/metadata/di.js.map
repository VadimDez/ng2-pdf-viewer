{"version":3,"file":"di.js","sourceRoot":"","sources":["../../../../../modules/@angular/core/src/metadata/di.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {resolveForwardRef} from '../di/forward_ref';\nimport {DependencyMetadata} from '../di/metadata';\nimport {OpaqueToken} from '../di/opaque_token';\nimport {StringWrapper, isString, stringify} from '../facade/lang';\nimport {Type} from '../type';\n\n/**\n * This token can be used to create a virtual provider that will populate the\n * `entryComponents` fields of components and ng modules based on its `useValue`.\n * All components that are referenced in the `useValue` value (either directly\n * or in a nested array or map) will be added to the `entryComponents` property.\n *\n * ### Example\n * The following example shows how the router can populate the `entryComponents`\n * field of an NgModule based on the router configuration which refers\n * to components.\n *\n * ```typescript\n * // helper function inside the router\n * function provideRoutes(routes) {\n *   return [\n *     {provide: ROUTES, useValue: routes},\n *     {provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: routes, multi: true}\n *   ];\n * }\n *\n * // user code\n * let routes = [\n *   {path: '/root', component: RootComp},\n *   {path: /teams', component: TeamsComp}\n * ];\n *\n * @NgModule({\n *   providers: [provideRoutes(routes)]\n * })\n * class ModuleWithRoutes {}\n * ```\n *\n * @experimental\n */\nexport const ANALYZE_FOR_ENTRY_COMPONENTS = new OpaqueToken('AnalyzeForEntryComponents');\n\n/**\n * Specifies that a constant attribute value should be injected.\n *\n * The directive can inject constant string literals of host element attributes.\n *\n * ### Example\n *\n * Suppose we have an `<input>` element and want to know its `type`.\n *\n * ```html\n * <input type=\"text\">\n * ```\n *\n * A decorator can inject string literal `text` like so:\n *\n * {@example core/ts/metadata/metadata.ts region='attributeMetadata'}\n * @stable\n */\nexport class AttributeMetadata extends DependencyMetadata {\n  constructor(public attributeName: string) { super(); }\n\n  get token(): AttributeMetadata {\n    // Normally one would default a token to a type of an injected value but here\n    // the type of a variable is \"string\" and we can't use primitive type as a return value\n    // so we use instance of Attribute instead. This doesn't matter much in practice as arguments\n    // with @Attribute annotation are injected by ElementInjector that doesn't take tokens into\n    // account.\n    return this;\n  }\n  toString(): string { return `@Attribute(${stringify(this.attributeName)})`; }\n}\n\n/**\n * Declares an injectable parameter to be a live list of directives or variable\n * bindings from the content children of a directive.\n *\n * ### Example ([live demo](http://plnkr.co/edit/lY9m8HLy7z06vDoUaSN2?p=preview))\n *\n * Assume that `<tabs>` component would like to get a list its children `<pane>`\n * components as shown in this example:\n *\n * ```html\n * <tabs>\n *   <pane title=\"Overview\">...</pane>\n *   <pane *ngFor=\"let o of objects\" [title]=\"o.title\">{{o.text}}</pane>\n * </tabs>\n * ```\n *\n * The preferred solution is to query for `Pane` directives using this decorator.\n *\n * ```javascript\n * @Component({\n *   selector: 'pane',\n *   inputs: ['title']\n * })\n * class Pane {\n *   title:string;\n * }\n *\n * @Component({\n *  selector: 'tabs',\n *  template: `\n *    <ul>\n *      <li *ngFor=\"let pane of panes\">{{pane.title}}</li>\n *    </ul>\n *    <ng-content></ng-content>\n *  `\n * })\n * class Tabs {\n *   @ContentChildren(Pane) panes: QueryList<Pane>;\n * }\n * ```\n *\n * A query can look for variable bindings by passing in a string with desired binding symbol.\n *\n * ### Example ([live demo](http://plnkr.co/edit/sT2j25cH1dURAyBRCKx1?p=preview))\n * ```html\n * <seeker>\n *   <div #findme>...</div>\n * </seeker>\n *\n * @Component({ selector: 'seeker' })\n * class Seeker {\n *   @ContentChildren('findme') elList;\n * }\n * ```\n *\n * In this case the object that is injected depend on the type of the variable\n * binding. It can be an ElementRef, a directive or a component.\n *\n * Passing in a comma separated list of variable bindings will query for all of them.\n *\n * ```html\n * <seeker>\n *   <div #find-me>...</div>\n *   <div #find-me-too>...</div>\n * </seeker>\n *\n *  @Component({\n *   selector: 'seeker'\n * })\n * class Seeker {\n *   @ContentChildren('findMe, findMeToo') elList: QueryList<ElementRef>;\n * }\n * ```\n *\n * Configure whether query looks for direct children or all descendants\n * of the querying element, by using the `descendants` parameter.\n * It is set to `false` by default.\n *\n * ### Example ([live demo](http://plnkr.co/edit/wtGeB977bv7qvA5FTYl9?p=preview))\n * ```html\n * <container #first>\n *   <item>a</item>\n *   <item>b</item>\n *   <container #second>\n *     <item>c</item>\n *   </container>\n * </container>\n * ```\n *\n * When querying for items, the first container will see only `a` and `b` by default,\n * but with `ContentChildren(TextDirective, {descendants: true})` it will see `c` too.\n *\n * The queried directives are kept in a depth-first pre-order with respect to their\n * positions in the DOM.\n *\n * ContentChildren does not look deep into any subcomponent views.\n *\n * ContentChildren is updated as part of the change-detection cycle. Since change detection\n * happens after construction of a directive, QueryList will always be empty when observed in the\n * constructor.\n *\n * The injected object is an unmodifiable live list.\n * See {@link QueryList} for more details.\n * @stable\n */\nexport class QueryMetadata extends DependencyMetadata {\n  /**\n   * whether we want to query only direct children (false) or all\n   * children (true).\n   */\n  descendants: boolean;\n  first: boolean;\n  /**\n   * The DI token to read from an element that matches the selector.\n   */\n  read: any;\n\n  constructor(\n      private _selector: Type<any>|string,\n      {descendants = false, first = false,\n       read = null}: {descendants?: boolean, first?: boolean, read?: any} = {}) {\n    super();\n    this.descendants = descendants;\n    this.first = first;\n    this.read = read;\n  }\n\n  /**\n   * always `false` to differentiate it with {@link ViewQueryMetadata}.\n   */\n  get isViewQuery(): boolean { return false; }\n\n  /**\n   * what this is querying for.\n   */\n  get selector() { return resolveForwardRef(this._selector); }\n\n  /**\n   * whether this is querying for a variable binding or a directive.\n   */\n  get isVarBindingQuery(): boolean { return isString(this.selector); }\n\n  /**\n   * returns a list of variable bindings this is querying for.\n   * Only applicable if this is a variable bindings query.\n   */\n  get varBindings(): string[] { return StringWrapper.split(this.selector, /\\s*,\\s*/g); }\n\n  toString(): string { return `@Query(${stringify(this.selector)})`; }\n}\n\n// TODO: add an example after ContentChildren and ViewChildren are in master\n/**\n * Configures a content query.\n *\n * Content queries are set before the `ngAfterContentInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Directive({\n *   selector: 'someDir'\n * })\n * class SomeDir {\n *   @ContentChildren(ChildDirective) contentChildren: QueryList<ChildDirective>;\n *\n *   ngAfterContentInit() {\n *     // contentChildren is set\n *   }\n * }\n * ```\n * @stable\n */\nexport class ContentChildrenMetadata extends QueryMetadata {\n  constructor(\n      _selector: Type<any>|string,\n      {descendants = false, read = null}: {descendants?: boolean, read?: any} = {}) {\n    super(_selector, {descendants: descendants, read: read});\n  }\n}\n\n// TODO: add an example after ContentChild and ViewChild are in master\n/**\n * Configures a content query.\n *\n * Content queries are set before the `ngAfterContentInit` callback is called.\n *\n * ### Example\n *\n * ```\n * @Directive({\n *   selector: 'someDir'\n * })\n * class SomeDir {\n *   @ContentChild(ChildDirective) contentChild;\n *\n *   ngAfterContentInit() {\n *     // contentChild is set\n *   }\n * }\n * ```\n * @stable\n */\nexport class ContentChildMetadata extends QueryMetadata {\n  constructor(_selector: Type<any>|string, {read = null}: {read?: any} = {}) {\n    super(_selector, {descendants: true, first: true, read: read});\n  }\n}\n\n/**\n * Similar to {@link ContentChildMetadata}, but querying the component view, instead\n * of the content children.\n *\n * ### Example ([live demo](http://plnkr.co/edit/eNsFHDf7YjyM6IzKxM1j?p=preview))\n *\n * ```javascript\n * @Component({\n *   ...,\n *   template: `\n *     <item> a </item>\n *     <item> b </item>\n *     <item> c </item>\n *   `\n * })\n * class MyComponent {\n *   shown: boolean;\n *\n *   constructor(private @ViewChildren(Item) items:QueryList<Item>) {\n *     items.changes.subscribe(() => console.log(items.length));\n *   }\n * }\n * ```\n *\n * As `shown` is flipped between true and false, items will contain zero of one\n * items.\n *\n * Specifies that a {@link QueryList} should be injected.\n *\n * The injected object is an iterable and observable live list.\n * See {@link QueryList} for more details.\n * @stable\n */\nexport class ViewQueryMetadata extends QueryMetadata {\n  constructor(\n      _selector: Type<any>|string, {descendants = false, first = false, read = null}:\n                                       {descendants?: boolean, first?: boolean, read?: any} = {}) {\n    super(_selector, {descendants: descendants, first: first, read: read});\n  }\n\n  /**\n   * always `true` to differentiate it with {@link QueryMetadata}.\n   */\n  get isViewQuery() { return true; }\n}\n\n/**\n * Declares a list of child element references.\n *\n * Angular automatically updates the list when the DOM is updated.\n *\n * `ViewChildren` takes an argument to select elements.\n *\n * - If the argument is a type, directives or components with the type will be bound.\n *\n * - If the argument is a string, the string is interpreted as a list of comma-separated selectors.\n * For each selector, an element containing the matching template variable (e.g. `#child`) will be\n * bound.\n *\n * View children are set before the `ngAfterViewInit` callback is called.\n *\n * ### Example\n *\n * With type selector:\n *\n * ```\n * @Component({\n *   selector: 'child-cmp',\n *   template: '<p>child</p>'\n * })\n * class ChildCmp {\n *   doSomething() {}\n * }\n *\n * @Component({\n *   selector: 'some-cmp',\n *   template: `\n *     <child-cmp></child-cmp>\n *     <child-cmp></child-cmp>\n *     <child-cmp></child-cmp>\n *   `,\n *   directives: [ChildCmp]\n * })\n * class SomeCmp {\n *   @ViewChildren(ChildCmp) children:QueryList<ChildCmp>;\n *\n *   ngAfterViewInit() {\n *     // children are set\n *     this.children.toArray().forEach((child)=>child.doSomething());\n *   }\n * }\n * ```\n *\n * With string selector:\n *\n * ```\n * @Component({\n *   selector: 'child-cmp',\n *   template: '<p>child</p>'\n * })\n * class ChildCmp {\n *   doSomething() {}\n * }\n *\n * @Component({\n *   selector: 'some-cmp',\n *   template: `\n *     <child-cmp #child1></child-cmp>\n *     <child-cmp #child2></child-cmp>\n *     <child-cmp #child3></child-cmp>\n *   `,\n *   directives: [ChildCmp]\n * })\n * class SomeCmp {\n *   @ViewChildren('child1,child2,child3') children:QueryList<ChildCmp>;\n *\n *   ngAfterViewInit() {\n *     // children are set\n *     this.children.toArray().forEach((child)=>child.doSomething());\n *   }\n * }\n * ```\n * @stable\n */\nexport class ViewChildrenMetadata extends ViewQueryMetadata {\n  constructor(_selector: Type<any>|string, {read = null}: {read?: any} = {}) {\n    super(_selector, {descendants: true, read: read});\n  }\n  toString(): string { return `@ViewChildren(${stringify(this.selector)})`; }\n}\n\n/**\n *\n * Declares a reference of child element.\n *\n * `ViewChildren` takes an argument to select elements.\n *\n * - If the argument is a type, a directive or a component with the type will be bound.\n *\n If the argument is a string, the string is interpreted as a selector. An element containing the\n matching template variable (e.g. `#child`) will be bound.\n *\n * In either case, `@ViewChild()` assigns the first (looking from above) element if there are\n multiple matches.\n *\n * View child is set before the `ngAfterViewInit` callback is called.\n *\n * ### Example\n *\n * With type selector:\n *\n * ```\n * @Component({\n *   selector: 'child-cmp',\n *   template: '<p>child</p>'\n * })\n * class ChildCmp {\n *   doSomething() {}\n * }\n *\n * @Component({\n *   selector: 'some-cmp',\n *   template: '<child-cmp></child-cmp>',\n *   directives: [ChildCmp]\n * })\n * class SomeCmp {\n *   @ViewChild(ChildCmp) child:ChildCmp;\n *\n *   ngAfterViewInit() {\n *     // child is set\n *     this.child.doSomething();\n *   }\n * }\n * ```\n *\n * With string selector:\n *\n * ```\n * @Component({\n *   selector: 'child-cmp',\n *   template: '<p>child</p>'\n * })\n * class ChildCmp {\n *   doSomething() {}\n * }\n *\n * @Component({\n *   selector: 'some-cmp',\n *   template: '<child-cmp #child></child-cmp>',\n *   directives: [ChildCmp]\n * })\n * class SomeCmp {\n *   @ViewChild('child') child:ChildCmp;\n *\n *   ngAfterViewInit() {\n *     // child is set\n *     this.child.doSomething();\n *   }\n * }\n * ```\n * @stable\n */\nexport class ViewChildMetadata extends ViewQueryMetadata {\n  constructor(_selector: Type<any>|string, {read = null}: {read?: any} = {}) {\n    super(_selector, {descendants: true, first: true, read: read});\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}